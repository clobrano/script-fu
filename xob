#!/usr/bin/env bash
# XOB: Xdg-Open Bookmark
# Helper tool to open web bookmarks stored in $HOME/.bookmarks file
# each line of the bookmark file is expected to be made of two elements:
# - a keyword
# - the http link

BOOKMARKS="$HOME/Documents/bookmarks"

if [[ -z $1 ]]; then
    cat ${BOOKMARKS}
    exit 0
fi

if [[ $(awk '{print $1}' "${BOOKMARKS}" | grep -c $1) -eq 0 ]]; then 
    echo "[!] No bookmarks with filter: $1"
    exit 1
fi
if [[ $(awk '{print $1}' "${BOOKMARKS}" | grep -c $1) -gt 1 ]]; then 
    echo "[!] Too many ($(grep -c $1 "${BOOKMARKS}")) bookmarks with filter: $1"
    $(grep $1 "${BOOKMARKS}")
    exit 1
fi

key=$(awk '{print $1}' "${BOOKMARKS}" | grep $1)
xdg-open `grep ${key} "${BOOKMARKS}" | awk '{print $2}'` 2>&1>/dev/null
